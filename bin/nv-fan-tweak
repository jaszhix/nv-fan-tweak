#!/usr/bin/node

const {join} = require('path');
const {spawn} = require('child_process');
const exc = require(join(__dirname, '../exc.js'));

exc('nvidia-settings -a [gpu:0]/GPUPowerMizerMode=1 > /dev/null')
  .then(exc('nvidia-settings -a [gpu:0]/GPUFanControlState=1 > /dev/null'))
  .then(() => {
    spawn(process.argv[0], [`${join(__dirname, '../index.js')}`], {
      detached: true,
      stdio: 'ignore'
    }).unref();
  })
  .catch((err) => console.log(err));